<!DOCTYPE html>
<html xmlns:th = "http://www.thymeleaf.org" xmlns:sec="http://www.w3.org.1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
</head>
<body>
<div class = "header-container">
    <div class = "header-item" OnClick="location.href ='/user/main_page'">Logoo</div>
    <div class = "header-item" OnClick="location.href ='http://www.naver.com'">Hello1</div>
    <div class = "header-item" OnClick="location.href = 'http://www.daum.net'">Hello2</div>
    <div class = "header-item" OnClick="location.href = 'http://www.instagram.com'">Hello3</div>
</div>
<div class = "login-container">
    <div class = "login-container2">
        <form action="#" th:object = "${UserDTO}" th:action = "@{/user/sign_up_result}" method ="post">
            <div class = "txt_box">
                <h3 class = "label_for_item">
                    <label for ="id-input">ID</label>
                </h3>
            <input style="height:30px;font-size:30px;" id = "id-input"type="text" name = "id" required
                minlength="3" maxlength="10" size="10" onfocusout="checkId()" th:field = "*{id}"><br>
                <span id = "id_pop1"style = "display:none; color:red">5~15자의 영문 소문자, 숫자와 특수기호만 사용 가능합니다</span>
                <span id = "id_pop2"style = "display:none; color:green">사용 가능한 아이디 입니다!</span>
            </div>
            <div class = "txt_box">
                <h3 class = "label_for_item">
                    <label for ="password">Password</label>
                </h3>
                <input style="height:30px;font-size:30px;" id = "password" type="password" name = "password" required minlength="3" maxlength="10" size="10" value = "********"
                onfocus="this.value=''"; onfocusout="checkPassword()" th:field = "*{password}">
                <span id = "password_pop1"style = "display:none; color: red">올바른 형식의 비밀번호가 아닙니다.</span>
                <span id = "password_pop2"style = "display:none; color: green">사용 가능한 비밀번호 입니다!</span>
            </div>
            <div class = "txt_box">
                <h3 class = "label_for_item">
                    <label for ="password-check">Password-Check</label>
                </h3>
                <input style="height:30px;font-size:30px;" id = "password-check" type="password" name = "password_check" required
                minlength="3" maxlength="10" size="10" value = "********"
                onfocus="this.value=''"; onfocusout="checkPasswords()">
                <span id = "password_check_pop1"style = "display:none; color: red">비밀번호와 확인 비밀번호가 일치하지 않습니다.</span>
                <span id = "password_check_pop2"style = "display:none; color: green">비밀번호가 확인 비밀번호와 일치합니다!</span>
            </div>
            <div class = "txt_box">
                <h3 class = "label_for_item">
                    <label for ="name">Name</label>
                </h3>
                <input style="height:30px;font-size:30px;" type="text" id = "name" required
                    minlength="3" maxlength="10" size="10" th:field = "*{name}">
                </div>
            <div class = "txt_box">
                <h3 class = "label_for_item">
                    <label for ="email">Email</label>
                </h3>
                <input style="height:30px;font-size:30px;"id = "email" type="email" name = "Email" required
                    minlength="3" maxlength="20" size="10" onfocusout="checkEmail()" th:field = "*{email}">
                <span id = "email_pop1"style = "display:none; color: red">올바른 형식의 이메일이 아닙니다.</span>
                <span id = "email_pop2"style = "display:none; color: green">사용 가능한 이메일 입니다!</span>
            </div>
            <div class = "button-container">
                <button id = "login" type= "submit">Signup</button>
            </div>
        </form>
    </div>
</div>
</body>
<style>
html, body {
        height: 100%;
    }

    .login-container{
        height: 100%;
        width: 100%;
        display: flex;
        border: 1px solid red;
        justify-content: center;
        align-items:center;
    }
    .login-container2{
        height: 60%;
        width: 50%;
        display: flex;
        border: 1px solid grey;
        flex-direction: column;
        justify-content: center;
        align-items:center;
    }
    .txt_box{
        display: flex;
        text-align: left;
        flex-direction: column;
        justify-content: center;
        align-items:center;
    }
.header-container {
    display: flex;
    background: purple;
    height: 10%;
}
.header-item {
    color:white;
    margin: 0% 0% 0% 0%;
    height: 100%;
    padding: 0em 1em 0em 1em;
    display: flex;
    justify-content: center;
    align-items:center;
}
.header-item:hover{
    background : red;
}
.button-container{
    display: flex;
    justify-content: center;
    align-items:center;
}
</style>
<script>
    function checkId(){
        var id = document.getElementById("id-input").value;
        var length = id.length; 
        if (length <= 6){
            var con = document.getElementById("id_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("id_pop2");
            con1.style.display = 'none';
            return
        }
        var con2 = document.getElementById("id_pop2");
        con2.style.display = 'block';
        var con = document.getElementById("id_pop1");
        con.style.display = 'none';
        return
    }
    function checkPassword(){
        var password = document.getElementById("password").value;
        var length = password.length;
        var secret_characters = ["!", "@", "#", "-", "$", "%", "&", "*"]
        if (length <= 6){
            var con = document.getElementById("password_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("password_pop2");
            con1.style.display = 'none';
            return 
        }
        if (length >12){
            var con = document.getElementById("password_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("password_pop2");
            con1.style.display = 'none';
            return 
        }
        var used_special_character = false;
        for (let i = 0; i < length; i++){
            var char = password[i];
            if (char in secret_characters){
                used_special_character = true;
                break;
            }
        }
        if (used_special_character == false) {
            var con = document.getElementById("password_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("password_pop2");
            con.style.display = 'none';
            return 
        }
        var con1 = document.getElementById("password_pop1");
        con1.style.display = 'none';
        var con2 = document.getElementById("password_pop2");
        con2.style.display = 'block';
        return
    }
    function checkPasswords(){
        var password = document.getElementById("password").value;
        var password2 = document.getElementById("password-check").value;
        if (password != password2 || password.length == 0 || password2.length == 0){
            document.getElementById("password").value = "********";
            document.getElementById("password-check").value = "********";
            var con = document.getElementById("password_check_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("password_check_pop2");
            con1.style.display = 'none';
            return 
        }
        var con = document.getElementById("password_check_pop1");
        con.style.display = 'none';
        var con1 = document.getElementById("password_check_pop2");
        con1.style.display = 'block';
    }
    function checkEmail(){
        var email = document.getElementById("email").value;
        var length = email.length;
        if (length < 3){
            var con = document.getElementById("email_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("email_pop2");
            con1.style.display = 'none';
            return
        }
        var id = ""
        var domain = ""
        for (let i = 1; i < length; i ++){
            var char = email[i];
            if (char == "@"){
                id = email.slice(0, i);
                domain = email.slice(i + 2);
            }
        }
        if (id == ""){
            var con = document.getElementById("email_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("email_pop2");
            con1.style.display = 'none';
            return
        }
        var domain_length = domain.length;
        var site = ""
        var type = ""
        for (let j = 0; j < domain_length; j ++){
            var char = domain[j];
            if (char == "."){
                site = domain.slice(0, j)
                type = domain.slice(j + 2)
            }
        }
        if (site == "" || type == ""){
            var con = document.getElementById("email_pop1");
            con.style.display = 'block';
            var con1 = document.getElementById("email_pop2");
            con1.style.display = 'none';
            return 
        }
        var con = document.getElementById("email_pop1");
        con.style.display = 'none';
        var con1 = document.getElementById("email_pop2");
        con1.style.display = 'block';

    }
</script>
</html>